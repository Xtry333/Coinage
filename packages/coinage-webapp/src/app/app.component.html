<!-- Top Navigation Bar -->
<app-top-nav-bar (toggleOpenSidebar)="onToggleOpenSidebar()"></app-top-nav-bar>

<!-- Mobile overlay -->
@if (isMobileView && isSidebarDisplayed) {
    <div
        class="fixed bottom-0 left-0 right-0 top-[3.75rem] z-30 bg-gray-900 bg-opacity-50 transition-opacity duration-300 md:hidden"
        (click)="closeSidebar()"
    ></div>
}

<!-- Sidebar -->
<app-sidebar-nav
    [class.show]="isSidebarDisplayed"
    [class.hidden]="!isSidebarDisplayed"
    [class.fixed]="isMobileView"
    [class.z-40]="isMobileView"
    [class.top-[3.75rem]]="isMobileView"
    [class.transition-transform]="isMobileView"
    [class.duration-300]="isMobileView"
    [class.ease-in-out]="isMobileView"
></app-sidebar-nav>

<!-- Main content -->
<main
    class="pt-[3.75rem] transition-all duration-300 ease-in-out"
    [class.md:ml-64]="isSidebarDisplayed && !isMobileView"
    [class.ml-0]="!isSidebarDisplayed || isMobileView"
>
    <router-outlet (activate)="onActivateRoute($event)"></router-outlet>
</main>

<!-- Modals and notifications -->
<app-modal [isDisplayed]="isTrinketDisplayed" (hideModalEvent)="hideTrinketModal()">
    <div>
        <app-create-transfer [redirectAfterSave]="false" (saveSuccess)="hideTrinketModal(); forceDashboardRefresh()"></app-create-transfer>
    </div>
</app-modal>

<app-notifications-container></app-notifications-container>

<div class="loader-transition" [ngClass]="{ hidden: !isPageLoading }">
    <app-spinner></app-spinner>
</div>
