<main class="sm:ml-auto md:px-4">
    <div class="mb-3 flex flex-wrap items-center justify-between border-b pt-3 md:flex-nowrap">
        <h2 class="text-2xl font-bold">Dashboard</h2>
        <div class="mb-2 flex flex-wrap gap-2 md:mb-0">
            <div class="mr-2 flex gap-1">
                <button
                    class="rounded-md border border-gray-300 bg-white px-3 py-1 text-sm text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    type="button"
                >
                    Share
                </button>
                <button
                    class="rounded-md border border-gray-300 bg-white px-3 py-1 text-sm text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    type="button"
                >
                    Export
                </button>
            </div>
            <button
                class="flex items-center gap-1 rounded-md border border-gray-300 bg-white px-3 py-1 text-sm text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500"
                type="button"
            >
                <svg
                    class="feather feather-calendar align-text-bottom"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    aria-hidden="true"
                >
                    <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="16" y1="2" x2="16" y2="6"></line>
                    <line x1="8" y1="2" x2="8" y2="6"></line>
                    <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                This week
            </button>
        </div>
    </div>
    <div>
        @if (showPage) {
            <div>
                <div class="table-container">
                    <app-dashboard-counters></app-dashboard-counters>
                    <!-- <div class="counters-container">
        app-big-counter [value]="balanceMainAccount" [upperLabel]="'PLN'" [lowerLabel]="'Konto PKO'"></app-big-counter>
      app-big-counter [value]="balanceSecondary" [upperLabel]="'PLN'" [lowerLabel]="'Portfel'"></app-big-counter>
    </div> -->
                    <app-transfers-table [transfers]="lastTransactions" [header]="'Recently Edited Transfers'" [showTodayMarker]="false"></app-transfers-table>
                    <div class="statistics-section">
                        <p>Average Income ({{ this.averageAmountLimit }} months): {{ rollingAverageIncomes | plnCurrency }}</p>
                        <p>Average Outcome ({{ this.averageAmountLimit }} months): {{ rollingAverageOutcomes | plnCurrency }}</p>
                    </div>
                    <app-chart [datasets]="accountStatsChartData" [labels]="accountStatsChartLabels"></app-chart>
                    <table class="last-transactions-table">
                        <caption>
                            <span>Total In/Outcomes per Month</span>
                        </caption>
                        <thead>
                            <tr>
                                <th class="text-left">Date</th>
                                <th class="text-right">Outcomes</th>
                                <th class="text-right">Incomes</th>
                                <th class="text-right">Savings</th>
                                <th class="text-right">Cost Per Day</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (outcome of totalAmountPerMonth; track totalOutcomesTracker($index, outcome)) {
                                <tr>
                                    <td class="month-name">
                                        <!-- <a [routerLink]="NavigatorPages.Summary(outcome.partedDate)">{{ outcome.monthName }} {{ outcome.year }}</a> -->
                                        {{ outcome.monthName }} {{ outcome.year }}
                                    </td>
                                    <td class="currency">{{ outcome.outcomes | plnCurrency }}</td>
                                    <td class="currency">{{ outcome.incomes | plnCurrency }}</td>
                                    <td class="currency">{{ outcome.profit | plnCurrency | replace: '-' : 'âˆ’ ' }}</td>
                                    <td class="currency">{{ outcome.profitPerDay | plnCurrency }}</td>
                                </tr>
                            }
                            <tr>
                                <td colspan="3"></td>
                                <td class="currency">{{ totalChange | plnCurrency }}</td>
                                <td colspan="1"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        }
    </div>
</main>
