@if (showPage) {
    <div>
        <div class="edit-transfer-container">
            <form (ngSubmit)="onClickSaveTransfer()">
                <div class="transaction-form">
                    <div>
                        <label for="description">Description</label>
                        <input id="description" [(ngModel)]="selectedTransferInputs.description" name="description" type="text" minlength="3" required />
                    </div>
                    <div>
                        <label for="amount">Price</label>
                        <input
                            id="amount"
                            [(ngModel)]="selectedTransferInputs.amount"
                            [min]="0"
                            name="amount"
                            type="number"
                            step=".01"
                            required
                            autocomplete="off"
                        />
                    </div>
                    <div>
                        <label for="category">Category</label>
                        <ng-select
                            #categorySelect
                            [(ngModel)]="selectedTransferInputs.categoryId"
                            [clearable]="false"
                            [required]="true"
                            [editableSearchTerm]="true"
                            [items]="categories"
                            [addTag]="onAddNewCategory.bind(this)"
                            (change)="onChangeCategory()"
                            name="category"
                            labelForId="category"
                            bindValue="id"
                            bindLabel="name"
                            addTagText="Add category"
                        >
                        </ng-select>
                    </div>
                    <div>
                        <label for="contractor">Contractor</label>
                        <ng-select
                            #contractorSelect
                            [(ngModel)]="selectedTransferInputs.contractorId"
                            [clearable]="true"
                            [editableSearchTerm]="true"
                            [items]="contractors"
                            [addTag]="onAddNewContractor.bind(this)"
                            name="contractor"
                            labelForId="contractor"
                            bindValue="id"
                            bindLabel="name"
                            addTagText="Add contractor"
                        >
                        </ng-select>
                    </div>
                    <div>
                        <label for="account">Virtual Account</label>
                        <ng-select
                            [(ngModel)]="selectedTransferInputs.accountId"
                            [clearable]="false"
                            [editableSearchTerm]="true"
                            [items]="accounts"
                            name="account"
                            labelForId="account"
                            bindValue="id"
                            bindLabel="name"
                        >
                        </ng-select>
                    </div>
                    <div>
                        <label for="targetAccount">Target Account</label>
                        <ng-select
                            [(ngModel)]="selectedTransferInputs.targetAccountId"
                            [clearable]="false"
                            [editableSearchTerm]="true"
                            [items]="accounts"
                            name="targetAccount"
                            labelForId="targetAccount"
                            bindValue="id"
                            bindLabel="name"
                        >
                        </ng-select>
                    </div>
                    <div>
                        <label for="date">Date</label>
                        <input id="date" [(ngModel)]="selectedTransferInputs.date" name="date" type="date" />
                    </div>
                    <button type="submit">
                        @if (editMode) {
                            <div>Save</div>
                        }
                        @if (!editMode) {
                            <div>Create</div>
                        }
                    </button>
                    @if (!editMode) {
                        <button (click)="clearInputData()" type="button">
                            <div>Clear</div>
                        </button>
                    }
                    @if (editMode) {
                        <button (click)="onClickDeleteTransfer()" type="button">Delete</button>
                    }
                    @if (editMode) {
                        <button (click)="onClickCancelEdit()" type="button">Cancel</button>
                    }
                </div>
            </form>
            @if (!shouldDisplayShoppingList) {
                <button (click)="openShoppingList()">{{ '>' }}</button>
            }
            @if (shouldDisplayShoppingList) {
                <div class="v-divider">
                    <app-item-shopping-list
                        [selectedCategoryId]="selectedTransferInputs.categoryId ?? null"
                        [preselectedItems]="itemsInTransfer"
                        (totalCostChanged)="onTotalCostChanged($event)"
                        (itemListChanged)="onItemListChanged($event)"
                    ></app-item-shopping-list>
                    <input id="overrideTotalCostOnChange" [(ngModel)]="shouldOverrideTotalCostOnChange" type="checkbox" />
                    <label for="overrideTotalCostOnChange">Override Total Cost On Item Change</label>
                </div>
            }
        </div>
    </div>
}
